// Shared icons for all modals and popups throughout the application - v2.8.4
export const SHARED_ICONS = {
  // Professional app icon with gradient background - Enhanced for better compatibility
  appIcon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWQxIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzAwNzk2NTtzdG9wLW9wYWNpdHk6MSIgLz4KPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMDBhMDgwO3N0b3Atb3BhY2l0eToxIiAvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iMTYiIGZpbGw9InVybCgjZ3JhZDEpIi8+CjxwYXRoIGQ9Ik0yNTYgMTIwQzE3Ny4zIDEyMCAxMTIgMTg1LjMgMTEyIDI2NEMxMTIgMzQyLjcgMTc3LjMgNDA4IDI1NiA0MDhDMzM0LjcgNDA4IDQwMCAzNDIuNyA0MDAgMjY0QzQwMCAxODUuMyAzMzQuNyAxMjAgMjU2IDEyMFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMDAgMjQwSDMxMlYyODlIMjAwVjI0MFoiIGZpbGw9IiMwMDc5NjUiLz4KPHBhdGggZD0iTTIwMCAzMDRIMzEyVjMzMkgyMDBWMzA0WiIgZmlsbD0iIzAwNzk2NSIvPgo8L3N2Zz4=',
  
  // Success icon
  successIcon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iMTYiIGZpbGw9IiMwMGQ5NjgiLz4KPHBhdGggZD0iTTIyNCAyODhMMzA0IDM2OEw0MDggMTY0IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjMyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+',
  
  // Error icon
  errorIcon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iMTYiIGZpbGw9IiNkYzI2MjYiLz4KPHBhdGggZD0iTTE2MCAxNjBMMzUyIDM1Mk0zNTIgMTYwTDE2MCAzNTIiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMzIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4=',
  
  // Warning icon
  warningIcon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iMTYiIGZpbGw9IiNmNTk1MDAiLz4KPHBhdGggZD0iTTI1NiAxNlYyNTZNMjU2IDMyOFYzNTIiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMzIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4=',
  
  // Info icon
  infoIcon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iMTYiIGZpbGw9IiMzYjgyZjYiLz4KPGNpcmNsZSBjeD0iMjU2IiBjeT0iMTYwIiByPSIzNiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTI1NiAyMjhWMzUyIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjMyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+',
  
  // Share icon
  shareIcon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iMTYiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzApIi8+CjxjaXJjbGUgY3g9IjE1MCIgY3k9IjEyOCIgcj0iMzYiIGZpbGw9IndoaXRlIi8+CjxjaXJjbGUgY3g9IjM2MiIgY3k9IjEyOCIgcj0iMzYiIGZpbGw9IndoaXRlIi8+CjxjaXJjbGUgY3g9IjI1NiIgY3k9IjM4NCIgcj0iMzYiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xODAgMTI4TDI4NiAzODRMMzMyIDM4NCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MF9saW5lYXJfMV8wIiB4MT0iMCIgeTE9IjAiIHgyPSI1MTIiIHkyPSI1MTIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzAwNzk2NSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMGEwODAiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4='
};

// Function to get icon HTML with consistent styling and robust fallbacks
export function getIconHtml(iconType, size = 80, extraStyles = '') {
  const icon = SHARED_ICONS[iconType] || SHARED_ICONS.appIcon;
  const defaultStyles = `
    width: ${size}px;
    height: ${size}px;
    border-radius: ${size === 30 ? '8px' : '16px'};
    box-shadow: 0 ${size/8}px ${size/4}px rgba(0, 121, 101, 0.3);
    border: ${size === 30 ? 'none' : '3px solid #007965'};
    transition: transform 0.3s ease;
    object-fit: cover;
    vertical-align: middle;
  `;
  
  // Enhanced fallback with multiple options
  const fallbackHtml = `
    onerror="this.onerror=null; 
      this.src='/manifest/icon-192x192.png'; 
      this.onerror=function(){this.src='/manifest/icon-144x144.png'; this.onerror=function(){this.style.display='none'; this.parentElement.innerHTML='<div style=\\"width:${size}px;height:${size}px;border-radius:${size === 30 ? '8px' : '16px'};background:linear-gradient(135deg,#007965 0%,#00a080 100%);display:flex;align-items:center;justify-content:center;color:white;font-size:${size/4}px;font-weight:bold;border:3px solid rgba(255,255,255,0.8);\\">CP</div>';};}"
  `;
  
  return `<img src="${icon}" alt="${iconType} icon" 
                style="${defaultStyles} ${extraStyles}"
                ${fallbackHtml}
                onmouseover="this.style.transform='scale(1.05)'"
                onmouseout="this.style.transform='scale(1)'" />`;
}

// Function to create inline icon for text
export function getInlineIcon(iconType = 'appIcon', size = 30) {
  const icon = SHARED_ICONS[iconType] || SHARED_ICONS.appIcon;
  return `<img src="${icon}" alt="icon" 
                style="width: ${size}px; height: ${size}px; 
                       border-radius: 8px; 
                       box-shadow: 0 4px 12px rgba(0, 121, 101, 0.3); 
                       vertical-align: middle; 
                       object-fit: cover;"
                onerror="this.onerror=null; this.src='/manifest/icon-192x192.png'; this.onerror=function(){this.src='/manifest/icon-144x144.png'; this.onerror=function(){this.style.display='none'; this.parentElement.innerHTML='<div style=\\"width:${size}px;height:${size}px;border-radius:8px;background:linear-gradient(135deg,#007965 0%,#00a080 100%);display:inline-flex;align-items:center;justify-content:center;color:white;font-size:${size/3}px;font-weight:bold;vertical-align:middle;\\">CP</div>';};}" />`;
}

// Export for use in all modules
window.SHARED_ICONS = SHARED_ICONS;
window.getIconHtml = getIconHtml;
window.getInlineIcon = getInlineIcon;
