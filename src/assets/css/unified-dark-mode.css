/* ====== UNIFIED DARK MODE SYSTEM ====== */
/* Target: body.dark */
/* Purpose: Visual overrides ONLY (Colors, Shadows, Gradients). No layout changes. */

body.dark {
  background-color: var(--light-bg);
  color: var(--gray-700); 
}

/* =========================================
   1. BASE & TYPOGRAPHY
   ========================================= */

/* 1.1 Main Page Titles (Modern Gradient) */
body.dark h1, 
body.dark h2,
body.dark .page-title,
body.dark .section-header h2 {
  background: var(--header-gradient);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  text-fill-color: transparent;
  text-shadow: 0 2px 10px rgba(45, 212, 191, 0.1); 
  font-weight: 800;
}

/* تصحيح ألوان العناوين الفرعية لتكون فاتحة */
body.dark h3, body.dark h4, body.dark h5, body.dark h6 {
  color: var(--gray-800);
}

body.dark a { color: var(--primary); }
body.dark a:hover { color: var(--primary-light); }

/* Scrollbars */
body.dark ::-webkit-scrollbar-track { background-color: #0f172a; }
body.dark ::-webkit-scrollbar-thumb { background-color: #334155; border-radius: 4px; }
body.dark ::-webkit-scrollbar-thumb:hover { background-color: #475569; }

/* =========================================
   2. MODERN LAYOUT SURFACES (Glassmorphism)
   ========================================= */

/* Header (topbar) */
body.dark header,
body.dark .header-content {
  background: var(--header-bg) !important;
  border-bottom: 1px solid var(--dark-border);
  box-shadow: 0 4px 20px var(--dark-shadow);
  backdrop-filter: blur(10px);
}

/* Sidebar - Unified with header theme */
body.dark .sidebar,
body.dark .main-sidebar {
  background: linear-gradient(180deg, #111827 0%, #0f172a 100%);
  border-left: 1px solid rgba(255, 255, 255, 0.05);
  box-shadow: 5px 0 15px rgba(0, 0, 0, 0.3);
}

/* Sidebar Active Links */
body.dark .sidebar .nav-link.active,
body.dark .sidebar a.active {
  background: linear-gradient(270deg, rgba(45, 212, 191, 0.15) 0%, transparent 100%);
  border-right: 3px solid var(--primary);
  color: #fff;
}

/* Footer */
body.dark .footer {
  background: var(--footer-bg);
  border-top: 1px solid rgba(255, 255, 255, 0.05);
  color: var(--gray-600);
}

/* =========================================
   4. TABLES SYSTEM
   ========================================= */
body.dark table,
body.dark .modern-table,
body.dark .collections-table {
  background: var(--surface-bg);
  border-color: var(--dark-border);
}

body.dark thead th {
  background: var(--table-header-bg);
  color: #e2e8f0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

body.dark tbody td {
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  border-right: 1px solid rgba(255, 255, 255, 0.05);
  color: var(--gray-700);
}

body.dark .shop {
    color: var(--primary-light);
}

/* Total Row Styles */
body.dark .total-row {
  background: var(--table-header-bg) !important;
}

body.dark .total-row,
body.dark .total-row td {
  color: #ffffff !important;
}

body.dark .total-row-negative {
  background: #7f1d1d !important; /* Red Dark */
}

/* =========================================
   5. COMPONENT SPECIFICS (Summary, Stats, Badges)
   ========================================= */

body.dark .summary-item,
body.dark .stat-icon,
body.dark .bg-light,
body.dark .faq-item,
body.dark .faq-answer {
  background: #0f172a;
  border-color: var(--gray-300);
}

body.dark .summary-title,
body.dark .stat-value {
  color: #f1f5f9;
}

body.dark .stat-content h3,
body.dark .field-header {
  color: var(--gray-600);
}

body.dark .bold-input,
body.dark .calc-field {
  color: var(--primary-light);
}

body.dark .plan-header {
  background: linear-gradient(to bottom, var(--dark-surface), var(--content-bg));
  border-bottom-color: var(--dark-border);
}

body.dark .plan-features li {
  border-bottom-color: rgba(255,255,255,0.05);
  color: var(--gray-600);
}

/* Status Badges - Themed for Dark mode */
body.dark .status-active { background: rgba(16, 185, 129, 0.15); color: #34d399; }
body.dark .status-cancelled { background: rgba(245, 158, 11, 0.15); color: #fbbf24; }
body.dark .status-expired { background: rgba(239, 68, 68, 0.15); color: #f87171; }

/* Modals */
body.dark .modal-content,
body.dark .shared-modal {
  background: var(--surface-bg);
  border: 1px solid var(--dark-border);
}

/* Page header - Unified Dark Theme */
body.dark .page-header {
  /* التدرج العمودي: الداكن في الأعلى والأفتح قليلاً في الأسفل */
  background: linear-gradient(to bottom, #0a1120 0%, #1e293b 100%) !important;
  border: 1px solid var(--dark-border) !important;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4) !important;
}

/* تعديل الطبقة الإضافية لتكون عمودية أيضاً أو مخفية لمنع التعارض */
body.dark .page-header::after {
  background: linear-gradient(to bottom, rgba(255,255,255,0.03) 0%, transparent 100%) !important;
}

body.dark .page-header h1 {
  background: linear-gradient(to bottom, #ffffff 0%, var(--primary-light) 100%);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: none;
}

body.dark .page-header .subtitle {
  color: var(--gray-600);
  opacity: 1;
}

body.dark .zoom-trigger-btn {
  background: rgba(45, 212, 191, 0.1);
  border-color: rgba(45, 212, 191, 0.2);
  color: var(--primary-light);
}

body.dark .zoom-trigger-btn:hover {
  background: rgba(45, 212, 191, 0.2);
  border-color: var(--primary-light);
}

/* Login Page Dark Overrides */
body.dark .login-wrapper {
  background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
}

body.dark .install-app-btn {
  background: #0f172a;
  border-color: var(--gray-300);
}

body.dark .install-btn-title { color: var(--gray-900); }
body.dark .install-btn-subtitle { color: var(--gray-600); }
body.dark .install-app-icon { background: #1e293b; }

/* Alert Overrides in Dark Mode */
body.dark .alert-success, body.dark .status-message.success {
  background: rgba(16, 185, 129, 0.15);
  color: #34d399;
  border: 1px solid rgba(16, 185, 129, 0.2);
}

body.dark .alert-danger, body.dark .status-message.error {
  background: rgba(239, 68, 68, 0.15);
  color: #f87171;
  border: 1px solid rgba(239, 68, 68, 0.2);
}

body.dark .alert-warning, body.dark .status-message.warning {
  background: rgba(245, 158, 11, 0.15);
  color: #fbbf24;
  border: 1px solid rgba(245, 158, 11, 0.2);
}
