/* ====== UNIFIED DARK MODE SYSTEM ====== */
/* Target: body.dark */
/* Purpose: Visual overrides ONLY (Colors, Shadows, Gradients). No layout changes. */

body.dark {
  background-color: #0f172a; /* لون داكن صريح للخلفية */
  color: #e2e8f0; /* نص فاتح مريح للعين */
}

/* =========================================
   1. BASE & TYPOGRAPHY
   ========================================= */

/* 1.1 Main Page Titles (Modern Gradient) */
body.dark h1, 
body.dark h2,
body.dark .page-title,
body.dark .section-header h2 {
  background: var(--header-gradient);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  text-fill-color: transparent;
  text-shadow: 0 2px 10px rgba(45, 212, 191, 0.1); 
  font-weight: 800;
}

/* تصحيح ألوان العناوين الفرعية لتكون فاتحة (تم الإصلاح لضمان التباين) */
body.dark h3, body.dark h4, body.dark h5, body.dark h6 {
  color: #f1f5f9;
}

body.dark a { color: var(--primary-light); }
body.dark a:hover { color: #5eead4; }

/* Scrollbars */
body.dark ::-webkit-scrollbar-track { background-color: #0f172a; }
body.dark ::-webkit-scrollbar-thumb { background-color: #334155; border-radius: 4px; }
body.dark ::-webkit-scrollbar-thumb:hover { background-color: #475569; }

/* =========================================
   2. MODERN LAYOUT SURFACES (Glassmorphism)
   ========================================= */

/* Header (topbar) */
body.dark header,
body.dark .header-content {
  background: rgba(15, 23, 42, 0.8) !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
}

/* Sidebar - Unified with header theme */
body.dark .sidebar,
body.dark .main-sidebar {
  background: linear-gradient(180deg, #111827 0%, #0f172a 100%);
  border-left: 1px solid rgba(255, 255, 255, 0.05);
  box-shadow: 5px 0 15px rgba(0, 0, 0, 0.3);
}

/* Sidebar Active Links */
body.dark .sidebar .nav-link.active,
body.dark .sidebar a.active {
  background: linear-gradient(270deg, rgba(45, 212, 191, 0.15) 0%, transparent 100%);
  border-right: 3px solid var(--primary-light);
  color: #fff;
}

/* Footer */
body.dark .footer {
  background: #111827;
  border-top: 1px solid rgba(255, 255, 255, 0.05);
  color: #94a3b8;
}

/* =========================================
   4. TABLES SYSTEM
   ========================================= */
body.dark table,
body.dark .modern-table,
body.dark .collections-table {
  background: #1e293b;
  border-color: rgba(255, 255, 255, 0.1);
}

body.dark thead th {
  background: #0f172a;
  color: #f1f5f9;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

body.dark tbody td {
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  border-right: 1px solid rgba(255, 255, 255, 0.05);
  color: #cbd5e1; /* نص فاتح داخل الجدول */
}

body.dark .shop {
    color: var(--primary-light);
    font-weight: 700;
}

/* Total Row Styles */
body.dark .total-row {
  background: #0f172a !important;
}

body.dark .total-row,
body.dark .total-row td {
  color: #ffffff !important;
  font-weight: 800;
}

body.dark .total-row-negative {
  background: #7f1d1d !important; /* Red Dark */
}

/* =========================================
   5. COMPONENT SPECIFICS (Summary, Stats, Badges)
   ========================================= */

body.dark .summary-item,
body.dark .stat-icon,
body.dark .bg-light,
body.dark .faq-item,
body.dark .faq-answer {
  background: #1e293b;
  border-color: rgba(255, 255, 255, 0.1);
}

body.dark .summary-title,
body.dark .stat-value {
  color: #f8fafc;
}

body.dark .stat-content h3,
body.dark .field-header {
  color: #94a3b8;
}

body.dark .bold-input,
body.dark .calc-field {
  color: var(--primary-light);
}

body.dark .plan-header {
  background: linear-gradient(to bottom, #1e293b, #0f172a);
  border-bottom-color: rgba(255, 255, 255, 0.1);
}

body.dark .plan-features li {
  border-bottom-color: rgba(255,255,255,0.05);
  color: #cbd5e1;
}

/* Status Badges - Themed for Dark mode */
body.dark .status-active { background: rgba(16, 185, 129, 0.2); color: #34d399; }
body.dark .status-cancelled { background: rgba(245, 158, 11, 0.2); color: #fbbf24; }
body.dark .status-expired { background: rgba(239, 68, 68, 0.2); color: #f87171; }

/* Modals */
body.dark .modal-content,
body.dark .shared-modal {
  background: #1e293b;
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: #f1f5f9;
}

/* Page header - Unified Dark Theme */
body.dark .page-header {
  background: linear-gradient(to bottom, #0a1120 0%, #1e293b 100%) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4) !important;
}

body.dark .page-header h1 {
  background: linear-gradient(to bottom, #ffffff 0%, var(--primary-light) 100%);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: none;
}

body.dark .page-header .subtitle {
  color: #94a3b8;
  opacity: 1;
}

/* Alert Overrides in Dark Mode - تباين عالٍ للنصوص */
body.dark .alert, body.dark .status-bar {
  border-width: 1px;
}

body.dark .alert-info {
  background: rgba(14, 165, 233, 0.15);
  color: #7dd3fc;
  border-color: rgba(14, 165, 233, 0.2);
}

body.dark .alert-success, body.dark .status-message.success, body.dark .status-bar.success {
  background: rgba(16, 185, 129, 0.15);
  color: #34d399;
  border: 1px solid rgba(16, 185, 129, 0.3);
}

body.dark .alert-danger, body.dark .status-message.error, body.dark .status-bar.error {
  background: rgba(239, 68, 68, 0.15);
  color: #f87171;
  border: 1px solid rgba(239, 68, 68, 0.3);
}

body.dark .alert-warning, body.dark .status-message.warning, body.dark .status-bar.warning {
  background: rgba(245, 158, 11, 0.15);
  color: #fbbf24;
  border: 1px solid rgba(245, 158, 11, 0.3);
}

/* Login Page Corrections */
body.dark .login-card {
  background: rgba(21, 28, 41, 0.185);
  border-color: rgba(51, 252, 175, 0.5);
}

body.dark .app-name {
  color: #f8fafc;
}

body.dark .subtitle {
  color: #94a3b8;
}

body.dark .privacy-policy {
  color: #64748b;
}

body.dark .install-app-btn {
  background: #1e293b;
  border-color: rgba(255, 255, 255, 0.1);
}

body.dark .install-btn-title { color: #f1f5f9; }
body.dark .install-btn-subtitle { color: #94a3b8; }
body.dark .install-app-icon { background: #0f172a; }

/* Override: Login button color in dark mode (centralized override) */
body.dark .google-login-btn {
  /* فاتح في الأعلى -> داكن في المنتصف -> فاتح في الأسفل */
  background: linear-gradient(
      to bottom, 
      rgba(91, 240, 183, 0.815) 0%,   /* فاتح */
      rgba(57, 153, 116, 0.432) 50%,  /* داكن (المركز) */
      rgba(91, 240, 183, 0.815) 100%  /* فاتح */
  ) !important;
}

body.dark .google-login-btn:hover:not(:disabled) {
  box-shadow: 0 15px 30px rgba(51,252,175,0.18) !important;
  transform: translateY(-3px);
}