/* ====== SPECIALIZED COMPONENTS & LAYOUTS ====== */

/* =========================================
   1. PAGE WRAPPERS & LAYOUT STRUCTURE
   ========================================= */

   .page-container, 
   .harvest-page, 
   .dashboard-page, 
   .archive-page, 
   .subscriptions-page,
   .admin-dashboard,
   .my-subscription-page,
   .payment-page {
     width: var(--app-min-width, 768px); 
     margin: 0 auto;
     padding: 20px;
     animation: fadeIn 0.5s ease-in-out;
     box-sizing: border-box; 
   }
   
   /* =========================================
      2. DASHBOARD & DATA ENTRY COMPONENTS
      ========================================= */
   
   .input-section {
     margin-bottom: 24px;
   }
   
   .input-container,
   .archive-controls,
   .summary-container,
   .stat-card,
   .admin-section,
   .help-card,
   .subscription-card,
   .plan-card,
   .counter-card,
   .login-card,
   .faq-section {
     background: var(--container-bg);
     backdrop-filter: var(--container-backdrop);
     padding: 24px;
     border-radius: 16px;
     box-shadow: var(--container-shadow);
     border: 1px solid var(--container-border);
     position: relative;
     transition: var(--transition);
   }
   
   .input-label {
     display: flex;
     align-items: center;
     gap: 10px;
     font-weight: 700;
     margin-bottom: 12px;
     color: var(--gray-900);
   }
   
   .status-bar {
     display: flex;
     align-items: center;
     gap: 12px;
     padding: 14px 18px;
     margin-top: 15px;
     border-radius: 10px;
     font-size: 14px;
     font-weight: 500;
     border: 1px solid transparent;
     position: relative;
     overflow: hidden;
     box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
     transition: all 0.3s ease;
   }
   
   .status-icon-wrapper {
     display: flex;
     align-items: center;
     justify-content: center;
     min-width: 24px;
     font-size: 18px;
   }
   
   .status-content {
     display: flex;
     flex-direction: column;
     gap: 2px;
     flex: 1;
   }
   
   .status-text { font-weight: 600; }
   .status-subtext { font-size: 12px; opacity: 0.85; }
   
   .progress-line {
     position: absolute;
     bottom: 0;
     left: 0;
     height: 3px;
     background: currentColor;
     animation: progressMove 2s ease-in-out infinite;
   }
   
   .status-bar.paste { background: rgba(23, 162, 184, 0.08); color: #17a2b8; border-color: rgba(23, 162, 184, 0.2); }
   .status-bar.saving { background: rgba(255, 193, 7, 0.08); color: #ff9800; border-color: rgba(255, 152, 0, 0.2); }
   .status-bar.success { background: rgba(16, 185, 129, 0.08); color: #10b981; border-color: rgba(16, 185, 129, 0.2); }
   .status-bar.error { background: rgba(239, 68, 68, 0.08); color: #ef4444; border-color: rgba(239, 68, 68, 0.2); }
   
   /* =========================================
      3. HARVEST & SUMMARY SYSTEM
      ========================================= */
   
   .date-display {
     display: flex;
     align-items: center;
     gap: 15px;
     justify-content: center;
     margin-bottom: 25px;
     padding: 15px 20px;
     background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.08), rgba(var(--primary-rgb), 0.03));
     border-radius: 12px;
     border: 1px solid var(--border-color);
   }

  /* Highlight the day and date to match the teal accent from the design */
  .date-display .value {
    color: var(--primary, #2dd4bf); /* use header/primary color */
    font-weight: 800;
    font-size: 1.02rem;
  }

  .date-display .calendar-icon {
    color: var(--primary, #2dd4bf);
    font-size: 1.1rem;
  }
   
   .summary-container {
     margin: 35px 0;
   }
   
   .summary-title {
     text-align: center;
     font-size: 1.25rem;
     margin-bottom: 20px;
     display: flex;
     align-items: center;
     justify-content: center;
     gap: 12px;
     color: var(--gray-900);
     font-weight: 800;
   }
   
   .summary-divider {
     width: 70%;
     height: 3px;
     background: linear-gradient(90deg, transparent, var(--primary), transparent);
     margin: 10px auto 25px;
     opacity: 0.2;
   }
   
   .summary-grid {
     display: flex;
     flex-direction: column;
     gap: 18px;
   }
   
   .summary-row {
     display: flex;
     gap: 18px;
     width: 100%;
   }
   
   .summary-item {
     flex: 1;
     padding: 22px;
     background: var(--light-bg);
     border-radius: 14px;
     border: 1px solid var(--gray-300);
     display: flex;
     flex-direction: column;
     align-items: center;
     justify-content: center;
     transition: transform 0.3s ease;
   }
   
   .summary-item:hover {
     transform: translateY(-3px);
     border-color: var(--primary-light);
   }
   
   .field-header {
     display: flex;
     align-items: center;
     justify-content: center;
     gap: 10px;
     margin-bottom: 12px;
     color: var(--gray-600);
     font-size: 0.9rem;
     font-weight: 600;
   }
   
   /* Base style for calc fields */
   .calc-field {
     font-size: 1.5rem;
     font-weight: 900;
     font-family: var(--font-family-mono);
     color: var(--gray-900);
   }
   
   /* Specific scaling for summary values */
   .summary-item .calc-field {
     font-size: 1.00em; /* تصغير مبلغ التصفيرة وإجمالي المحصل درجة واحدة */
   }
   
   .summary-item .bold-input {
     font-size: 1.00rem !important; /* تكبير ليمت الماستر والرصيد الحالي درجة واحدة */
   }
   
   /* =========================================
      4. ADMIN DASHBOARD COMPONENTS
      ========================================= */
   
   .stats-container {
     display: grid;
     grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
     gap: 24px;
     margin-bottom: 35px;
   }
   
   .stat-icon {
     font-size: 2.2rem;
     color: var(--primary);
     background: rgba(var(--primary-rgb), 0.06);
     width: 60px;
     height: 60px;
     display: flex;
     align-items: center;
     justify-content: center;
     border-radius: 14px;
   }
   
   .stat-content h3 {
     font-size: 0.95rem;
     color: var(--gray-600);
     margin-bottom: 6px;
     font-weight: 600;
   }
   
   .stat-value {
     font-size: 1.6rem;
     font-weight: 800;
     color: var(--gray-900);
   }
   
   .admin-section {
     margin-bottom: 35px;
     overflow: hidden;
     padding: 0; /* Admin section header handles padding */
   }
   
   .admin-section-header {
     background: var(--table-header-bg);
     padding: 18px 24px;
     color: white;
     display: flex;
     justify-content: space-between;
     align-items: center;
   }
   
   .status-badge {
     padding: 6px 14px;
     border-radius: 20px;
     font-size: 0.8rem;
     font-weight: 700;
     display: inline-block;
     text-transform: uppercase;
     letter-spacing: 0.5px;
     border: 1px solid transparent;
   }
   
   .status-active { background: rgba(16, 185, 129, 0.1); color: #10b981; border-color: rgba(16, 185, 129, 0.2); }
   .status-cancelled { background: rgba(245, 158, 11, 0.1); color: #f59e0b; border-color: rgba(245, 158, 11, 0.2); }
   .status-expired { background: rgba(239, 68, 68, 0.1); color: #ef4444; border-color: rgba(239, 68, 68, 0.2); }
   
   /* =========================================
      5. HELP & UTILITY CARDS
      ========================================= */
   
   .help-section {
     display: flex;
     justify-content: center;
     padding: 25px 0;
   }
   
   .help-card {
     width: 100%;
     max-width: 920px;
   }
   
   .help-card h3 {
     display: flex;
     align-items: center;
     gap: 10px;
     margin-bottom: 15px;
     color: var(--primary);
     font-size: 1.1rem;
   }
   
   /* =========================================
      6. ANIMATIONS
      ========================================= */
   
   @keyframes fadeIn {
     from { opacity: 0; transform: translateY(12px); }
     to { opacity: 1; transform: translateY(0); }
   }
   
   @keyframes progressMove {
     0% { width: 0%; }
     100% { width: 100%; }
   }
   
   @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
   @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
   @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }
   @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-2px); } 75% { transform: translateX(2px); } }
   
   .animate-pulse { animation: pulse 2s ease-in-out infinite; }
   .animate-spin { animation: spin 1s linear infinite; }
   .animate-bounce { animation: bounce 0.6s ease-in-out; }
   .animate-shake { animation: shake 0.4s ease-in-out; }
   
   @media (max-width: 768px) {
     .summary-row { gap: 12px; }
   }
   
   /* =========================================
      7. SHARED UI ELEMENTS
      ========================================= */
   
   .bulk-actions {
     display: flex;
     align-items: center;
     gap: 12px;
     background: rgba(255, 255, 255, 0.15);
     padding: 6px 15px;
     border-radius: 10px;
   }
   
   .user-info-cell {
     display: flex;
     flex-direction: column;
     gap: 2px;
   }
   
   .user-name { font-weight: 700; color: var(--gray-900); }
   .user-email { font-size: 0.8rem; color: var(--gray-600); }


/* =========================================
   8. HARVEST VIEW SPECIFIC STYLES
   ========================================= */

/* Collab Banner */
.collab-banner {
  background: linear-gradient(to right, #fff7ed, #ffedd5);
  border-bottom: 2px solid #fdba74;
  color: #9a3412;
  padding: 10px 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  border-radius: 8px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}
.banner-content { display: flex; align-items: center; gap: 10px; font-size: 0.95rem; }
.pulse-icon { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; color: #ea580c; }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
.badge-viewer { background: #fee2e2; color: #ef4444; font-size: 0.75rem; padding: 2px 6px; border-radius: 4px; border: 1px solid #fca5a5; margin-right: 5px; }
.btn-exit { background: white; border: 1px solid #fdba74; color: #c2410c; padding: 4px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
.btn-exit:hover { background: #fff7ed; transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
.animate-slide-down { animation: slideDown 0.3s ease-out; }
@keyframes slideDown { from { transform: translateY(-10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

/* Dropdown Styles */
.relative { position: relative; }
.profile-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 1000;
  background-color: var(--surface-bg);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius-md);
  box-shadow: var(--shadow-lg);
  min-width: 200px;
  padding: 8px 0;
  margin-top: 4px;
}
.dropdown-item {
  display: block;
  padding: 10px 15px;
  color: var(--text-primary);
  font-size: 0.9rem;
  cursor: pointer;
  transition: background-color 0.2s;
}
.dropdown-item:hover {
  background-color: var(--bg-secondary);
}
.dropdown-item.disabled {
  color: var(--text-muted);
  cursor: not-allowed;
}

/* Original Styles */
.action-bar { margin-bottom: 10px; display: flex; justify-content: flex-end; }
.btn-sm { padding: 6px 12px; font-size: 0.85rem; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 5px; transition: 0.2s; font-weight: 600; }
.btn-outline-primary { border: 1px solid var(--primary); background: transparent; color: var(--primary); }
.btn-outline-primary:hover { background: var(--primary); color: white; }
.btn-outline-warning { border: 1px solid #f39c12; background: transparent; color: #f39c12; }
.btn-outline-warning:hover { background: #f39c12; color: white; }
.btn-outline-danger { border: 1px solid var(--danger); background: transparent; color: var(--danger); }
.btn-outline-danger:hover { background: var(--danger); color: white; }


/* Modal Styles */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 2000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(2px); animation: fadeIn 0.2s; }
.missing-modal, .overdue-modal { width: 90%; max-width: 500px; background: var(--surface-bg); border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; max-height: 80vh; border: 1px solid var(--border-color); box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
.modal-header { padding: 15px; background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
.modal-header h3 { font-size: 1.1rem; margin: 0; display: flex; align-items: center; gap: 10px; }
.close-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-muted); }
.scrollable-list { overflow-y: auto; padding: 0; flex: 1; }
.missing-list { list-style: none; padding: 0; margin: 0; }
.missing-list li { padding: 12px 15px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
.missing-list li:last-child { border-bottom: none; }
.center-name { font-weight: bold; color: var(--text-primary); }
.center-code { background: rgba(0,0,0,0.05); padding: 2px 6px; border-radius: 4px; font-family: monospace; font-size: 0.9rem; }
.modal-footer { padding: 10px 15px; background: var(--bg-secondary); text-align: center; border-top: 1px solid var(--border-color); display: flex; justify-content: flex-end; gap: 10px; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* Overdue Modal Table Styles */
.overdue-table { display: flex; flex-direction: column; }
.overdue-header, .overdue-row {
  display: grid;
  grid-template-columns: 40px 1fr 100px 100px;
  align-items: center;
  gap: 10px;
  padding: 12px 15px;
  border-bottom: 1px solid var(--border-color);
}
.overdue-header {
  font-weight: 700;
  background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.1), rgba(var(--primary-rgb), 0.05));
  color: var(--primary);
  border-top: 1px solid var(--border-color);
}
.overdue-row:hover { background-color: var(--bg-secondary); }
.overdue-body { overflow-y: auto; }
.text-center { text-align: center; }
.font-bold { font-weight: bold; }

/* has-overdue class */
.has-overdue input, .has-overdue span {
  color: #e53935 !important;
  font-weight: 700 !important;
}
body.dark .has-overdue input, body.dark .has-overdue span {
  color: #ff8a80 !important;
}

/* has-overpayment class */
.has-overpayment input, .has-overpayment span {
  color: var(--primary) !important;
  font-weight: 700 !important;
}
body.dark .has-overpayment input, body.dark .has-overpayment span {
  color: #69b4ff !important;
}


.modern-table thead th { font-size: 0.85rem !important; }
.no-wrap-cell { white-space: nowrap !important; overflow: hidden !important; text-overflow: ellipsis !important; }
.mx-2 { margin: 0 8px; }
.ml-2 { margin-left: 8px; }
.text-xs { font-size: 0.75rem; }
.small-text { font-size: 0.75rem; font-weight: 500; opacity: 0.8; display: block; pointer-events: none; }
.small-label { font-size: 0.7rem; font-weight: normal; opacity: 0.7; margin-right: 4px; }
.master-limit-input { border: 2px solid var(--primary-light) !important; background-color: rgba(var(--primary-rgb), 0.05) !important; }
.crown-gold { color: #ffc107; filter: drop-shadow(0 0 1px rgba(0,0,0,0.2)); }
.input-with-action { position: relative; display: flex; align-items: center; width: 100%; height: 100%; }
.text-center-important { text-align: center !important; }
.negative-extra { color: #ff6b6b !important; font-weight: bold; }
body.dark .negative-extra { color: #ff8e8e !important; }
.btn-toggle-sign { position: absolute; left: 0; bottom: 0; background: var(--border-color); color: var(--primary); border: none; border-radius: 0 var(--border-radius-sm) 0 0; width: 20px; height: 14px; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 18px; cursor: pointer; z-index: 5; opacity: 0.5; transition: var(--transition-fast); padding: 0; line-height: 0; }
body.dark .btn-toggle-sign { background: rgba(255, 255, 255, 0.1); color: var(--gray-400); }
.btn-toggle-sign:hover, .btn-toggle-sign:active { opacity: 1; background: var(--primary); color: white; }

.customer-count-badge { display: flex; flex-direction: column; align-items: center; justify-content: center; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--border-radius); padding: 4px 12px; min-width: 80px; box-shadow: var(--shadow-sm); }
.count-label { font-size: 0.75rem; color: var(--text-muted); font-weight: 600; }
.count-value { font-size: 1.1rem; font-weight: 800; color: var(--primary); }
.no-results { text-align: center; padding: 40px; color: var(--text-muted); font-style: italic; background: var(--bg-primary); border-bottom: 1px solid var(--border-color); }
.export-container { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; margin-bottom: 15px; padding: 0 5px; }
.btn-export-share { background: linear-gradient(135deg, var(--success) 0%, #059669 100%); color: white; border: none; padding: 8px 16px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px; box-shadow: 0 2px 5px rgba(16, 185, 129, 0.3); transition: var(--transition); }
.btn-export-share:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(16, 185, 129, 0.4); }
.btn-export-summary { background: linear-gradient(135deg, var(--primary) 0%, #2980b9 100%); box-shadow: 0 2px 5px rgba(var(--primary-rgb), 0.3); }
.btn-export-summary:hover { box-shadow: 0 4px 10px rgba(var(--primary-rgb), 0.4); }
.clear-search-btn { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); background: transparent; border: none; color: var(--gray-500); cursor: pointer; padding: 5px; display: flex; align-items: center; justify-content: center; transition: all 0.2s ease; z-index: 10; font-size: 1.2rem; }
.clear-search-btn:hover { color: var(--danger); transform: translateY(-50%) scale(1.1); }

.w-full { width: 100%; }
.pr-2 { padding-right: 8px; }
.custom-tooltip { position: fixed; background: var(--bg-primary); color: var(--text-primary); padding: 5px 10px; border-radius: 6px; z-index: 9999; border: 1px solid var(--border-color); pointer-events: none; }
   
   